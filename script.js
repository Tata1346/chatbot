const chatBox = document.getElementById("chat-box");
const userInput = document.getElementById("user-input");
let isMusicPlaying = false;
const audio = document.getElementById("comfort-audio");

userInput.addEventListener("keydown", function(event) {
    if (event.key === "Enter") {
        sendMessage();
    }
});

let isFirstMessage = true;
let comfortMode = false;
let comfortIndex = 0;

const comfortData = [
    ["‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°?", "‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÅ‡∏õ‡∏•‡∏Å‡πÄ‡∏•‡∏¢‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏î‡∏µ ‡πÜ ‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤‡∏ô‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‚ù§Ô∏è"],
    ["‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?", "‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏à‡πá‡∏ö‡∏õ‡∏ß‡∏î ‡∏Ñ‡∏∑‡∏≠‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à üíî"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏£‡πâ‡∏≠‡∏á‡πÑ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?", "‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏≠ ‡πÅ‡∏ï‡πà‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡∏¢‡∏ß‡∏¢‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏±‡∏ß‡πÉ‡∏à üíß"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÇ‡∏ó‡∏©‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏´‡∏°?", "‡∏≠‡∏¢‡πà‡∏≤‡πÇ‡∏ó‡∏©‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏õ‡∏ï‡∏•‡∏≠‡∏î ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß ‚ú®"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏´‡πâ‡∏≠‡∏†‡∏±‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?", "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏†‡∏±‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á ‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà üïäÔ∏è"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÑ‡∏´‡∏°?", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÅ‡∏ö‡∏ö‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏≠‡∏î‡∏µ‡∏ï‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ üï∞Ô∏è"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏•‡∏∑‡∏°‡πÄ‡∏Ç‡∏≤‡πÑ‡∏´‡∏°?", "‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏•‡∏∑‡∏° ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î üí™"],
    ["‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∂‡∏Å‡∏ñ‡∏∂‡∏á‡πÄ‡∏Ç‡∏≤‡πÑ‡∏´‡∏°?", "‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏Ñ‡∏∑‡∏≠‡∏™‡∏∞‡∏û‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à ‡∏ü‡∏±‡∏á‡∏°‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏£‡∏±‡πâ‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏ß‡πâ üé∂"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏à‡∏≠‡πÉ‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏´‡∏°?", "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏™‡∏°‡∏≠ ü§ù"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏´‡∏°?", "‡∏≠‡∏î‡∏µ‡∏ï‡πÅ‡∏Å‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏°‡∏≠ üåÖ"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏î‡∏µ‡∏û‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤?", "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏Å‡∏î‡∏µ ‡πÜ ü™û"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏•‡∏±‡∏ß‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏´‡∏°?", "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏≤‡∏à‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏û‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ üí´"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ß‡πâ‡πÑ‡∏´‡∏°?", "‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤ ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ üì¶"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÇ‡∏î‡∏î‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤?", "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏î‡∏î‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏à‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡πÉ‡∏´‡∏°‡πà ‡πÜ üåª"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏ö‡∏≠‡∏Å‡∏•‡∏≤‡πÄ‡∏Ç‡∏≤‡πÉ‡∏ô‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?", "‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å‡∏•‡∏≤‡πÉ‡∏ô‡πÉ‡∏à ‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡∏¢‡∏ß‡∏¢‡∏≤ ü´∂"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÇ‡∏Å‡∏£‡∏ò‡πÄ‡∏Ç‡∏≤‡πÑ‡∏´‡∏°?", "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Å‡∏£‡∏ò‡∏Ñ‡∏∑‡∏≠‡∏†‡∏≤‡∏£‡∏∞ ‡∏´‡∏≤‡∏Å‡∏ß‡∏≤‡∏á‡πÑ‡∏î‡πâ ‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏ö‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å üí®"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏´‡πâ‡∏≠‡∏†‡∏±‡∏¢‡πÄ‡∏Ç‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?", "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏†‡∏±‡∏¢‡πÄ‡∏Ç‡∏≤ ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏î‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏≠‡∏î‡∏µ‡∏ï üîì"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°?", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÑ‡∏°‡πà‡∏ú‡∏¥‡∏î ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà üíî"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡∏û‡∏π‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏±‡∏ö‡πÄ‡∏Ç‡∏≤‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏¢‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á?", "‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏≥‡∏û‡∏π‡∏î‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏ß‡πâ ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï üéì"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏ù‡∏±‡∏ô‡∏ñ‡∏∂‡∏á‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°?", "‡∏ù‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏à‡∏¢‡∏±‡∏á‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ ‡πÅ‡∏ï‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏∞‡∏Ñ‡πà‡∏≠‡∏¢ ‡πÜ ‡∏•‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏ô‡∏ù‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏≠‡∏á ‚è≥"],
    ["‡∏≠‡∏∞‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏®‡∏£‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ?", "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏®‡∏£‡πâ‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏£‡∏π ‡∏°‡∏±‡∏ô‡∏™‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ üìò"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏¢‡∏¥‡πâ‡∏°‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏Ç‡∏≤‡πÑ‡∏´‡∏°?", "‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏î‡∏≤‡∏¢‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏° ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏¢‡∏¥‡πâ‡∏°‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üåà"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Ç‡∏≤‡∏£‡∏±‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏´‡∏°?", "‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ä‡∏±‡∏î ‡πÅ‡∏ï‡πà‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà ‡πÜ ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏°‡∏≠ üíñ"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏Å‡∏±‡∏ö‡πÄ‡∏Ç‡∏≤‡πÑ‡∏´‡∏°?", "‡∏ù‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ù‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ üéØ"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏°‡∏±‡∏ô‡∏¢‡∏∏‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤?", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÑ‡∏°‡πà‡∏¢‡∏∏‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏™‡∏°‡∏≠ ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏¢‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ üõ§Ô∏è"],
    ["‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏Å‡∏±‡∏ö‡πÄ‡∏Ç‡∏≤‡πÑ‡∏´‡∏°?", "‡∏à‡∏á‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏µ ‡πÜ ‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏°‡∏±‡∏ô‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà ‚òÄÔ∏è"],
    ["‡∏≠‡∏∞‡πÑ‡∏£‡∏Ñ‡∏∑‡∏≠‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ?", "‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Å‡∏£‡∏≤‡∏∞‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤ üìñ"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï?", "‡∏à‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏Å‡∏Ñ‡∏∏‡∏ì ‚Äì ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à ‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏Ç‡πá‡∏á ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡πÅ‡∏û‡πâ üí°"],
    ["‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô‡πÑ‡∏´‡∏°?", "‡πÅ‡∏°‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤ üíö"],
    ["‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏à‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?", "‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏£‡πà‡∏á‡∏£‡∏µ‡∏ö ‡πÅ‡∏ï‡πà‡∏à‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà‡∏à‡∏∞‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏™‡∏°‡∏≠ üå∑"]
];

function sendMessage() {
    const message = userInput.value.trim();
    if (message === "") return;

    appendMessage("‡∏Ñ‡∏∏‡∏ì", message);
    userInput.value = "";
    userInput.focus();

    if (isFirstMessage) {
        botGreeting();
        isFirstMessage = false;
    } else if (comfortMode) {
        handleComfortAnswer(message);
    } else {
        getBotReply(message);
    }
}

function appendMessage(sender, message) {
    const msg = document.createElement("div");
    msg.innerHTML = `<strong>${sender}:</strong> ${message}`;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
}

function botGreeting() {
    const greeting = "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏û‡∏ö‡∏Ñ‡∏∏‡∏ì<br>‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡∏Ç‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:<br>" +
        "1Ô∏è‚É£ ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç<br>" +
        "2Ô∏è‚É£ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡∏°<br>" +
        "3Ô∏è‚É£ ‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á<br>" +
        "4Ô∏è‚É£ ‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏•‡∏≠‡∏ö (‡∏≠‡∏Å‡∏´‡∏±‡∏Å üíî)";
    setTimeout(() => {
        chatBox.innerHTML = "";
        appendMessage("‡∏ö‡∏≠‡∏ó", greeting);
    }, 300);
}

function getBotReply(userMsg) {
    chatBox.innerHTML = "";

    let reply = "‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏Ñ‡∏£‡∏±‡∏ö ‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏±‡πâ‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á";

    if (userMsg === "1") userMsg = "‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç";
    else if (userMsg === "2") userMsg = "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡∏°";
    else if (userMsg === "3") userMsg = "‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á";
    else if (userMsg === "4") userMsg = "‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏•‡∏≠‡∏ö";

    if (userMsg.includes("‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç")) {
        reply = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (‡πÄ‡∏ä‡πà‡∏ô 3+4*2) ‡πÅ‡∏•‡πâ‡∏ß‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡πâ";
    } else if (isValidExpression(userMsg)) {
        try {
            let result = eval(userMsg);
            reply = `‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡∏≠‡∏á ${userMsg} ‡∏Ñ‡∏∑‡∏≠ ${result}`;
        } catch {
            reply = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà";
        }
    } else if (userMsg.includes("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡∏°")) {
        reply = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å <a href="game/game.html" style="color:#0a84ff;">‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</a> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡∏°';
    } else if (userMsg.includes("‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á")) {
        reply = '‡∏•‡∏≠‡∏á‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏î‡∏µ ‡πÜ ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà <a href="https://www.youtube.com" target="_blank" style="color:#0a84ff;">‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ</a>';
    } else if (userMsg.includes("‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏•‡∏≠‡∏ö")) {
        comfortMode = true;
        comfortIndex = 0;
        playComfortMusic();
        reply = comfortData[comfortIndex][0];
    }

    setTimeout(() => appendMessage("‡∏ö‡∏≠‡∏ó", reply), 500);
}

function handleComfortAnswer(userMsg) {
    chatBox.innerHTML = "";

    const reply = comfortData[comfortIndex][1];
    appendMessage("‡∏ö‡∏≠‡∏ó", reply);

    userInput.value = "";
    userInput.focus();

    comfortIndex++;
    if (comfortIndex >= comfortData.length) {
        comfortMode = false;
        comfortIndex = 0;
        setTimeout(() => botGreeting(), 1500);
    } else {
        setTimeout(() => appendMessage("‡∏ö‡∏≠‡∏ó", comfortData[comfortIndex][0]), 1500);
    }
}

function isValidExpression(expr) {
    const regex = /^[0-9+\-*/().\s]+$/;
    return regex.test(expr);
}

function showTempMessage(text) {
    const temp = document.createElement("div");
    temp.innerHTML = `<strong>‡∏ö‡∏≠‡∏ó:</strong> ${text}`;
    temp.style.opacity = "0.8";
    temp.style.marginTop = "10px";
    chatBox.appendChild(temp);
    chatBox.scrollTop = chatBox.scrollHeight;
    setTimeout(() => temp.remove(), 2000);
}


function stopComfortMusic() {
    if (isMusicPlaying) {
        audio.pause();
        isMusicPlaying = false;
        showTempMessage("‚èπ ‡πÄ‡∏û‡∏•‡∏á‡∏ñ‡∏π‡∏Å‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
    }
}

function playComfortMusic() {
    audio.play().then(() => {
        isMusicPlaying = true;
        showTempMessage("‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏•‡∏≠‡∏ö‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß");
    });

}